🎁 Solidity のアクセス修飾子について
------------------

`MyEpicNFT.sol` に実装した関数や変数に付属する「アクセス修飾子」 について理解を深めましょう。

下記のコードを見ていきましょう。

```javascript
// MyEpicNFT.sol
// pickRandomFirstWord関数は、最初の単語を選びます。
function pickRandomFirstWord(uint256 tokenId) public view returns (string memory) {
	:
```

ここでは、1つ目の単語をランダムに選ぶ `pickRandomFirstWord` 関数を実装しました。まず、関数を就職している `public` について見ていきます。

これは、Solidity のアクセス修飾子の一つです。

Solidity 含め様々な言語において、各関数のアクセス権限について指定する必要があります。その指定を行うのが、アクセス修飾子です。

Solidityには、4つのアクセス修飾子が存在します。

1. **`public`**: `public` で定義された関数や変数は、それらが定義されているコントラクト、そのコントラクトが継承された別のコントラクト、それらコントラクトの外部と、**基本的にどこからでも**呼び出すことができます。*Solidityでは、アクセス修飾子がついてない**関数**を、自動的に `public` として扱います。*

2. **`private`**: `private` で定義された関数や変数は、**それらが定義されたコントラクトでのみ**呼び出すことができます。

3. **`internal`**: `internal` で定義された関数や変数は、**それらが定義されたコントラクト**と、**そのコントラクトが継承された別のコントラクト**の**両方**から呼び出すことができます。
*Solidity では、アクセス修飾子がついてない**変数**を、自動的に `internal` として扱います。*

4. **`external`**: `external`で定義された関数は変数は、**外部からのみ**呼び出すことができます。

以下に、Solidityのアクセス修飾子とアクセス権限についてまとめています。


|  |  <p align = center> コントラクトの外からの呼び出し</p> | <p align = center>コントラクトの内からの呼び出し</p>| <p align = center>コントラクトの継承先からの呼び出し</p> |
| ----------- | ----------- |----------- |----------- |
| <p align = center> public<br>（関数の初期設定）</p>|<p align = center> ✅</p>|<p align = center> ✅</p>|<p align = center> ✅</p>|
|  <p align = center> private</p>|<p align = center>❌</p>|<p align = center> ✅</p>|<p align = center>❌</p>|
|  <p align = center> internal<br>（変数の初期設定）</p>|<p align = center>❌</p>|<p align = center> ✅</p>|<p align = center> ✅</p>|
|  <p align = center> external</p>|<p align = center> ✅</p>|<p align = center>❌</p>|<p align = center>❌</p>|


これから Solidity のアクセス修飾子は頻繁に登場するので、まずは大まかな理解ができれば大丈夫です。

🔍 `msg.sender` について
------------------
```javascript
// MyEpicNFT.sol
_safeMint(msg.sender, newItemId);
```
`_safeMint` 関数の引数として `msg.sender` が登場するのをお気づきでしょうか？

`msg.sender` に入る値は、ずばり、**関数を呼び出した人（＝NFT を Mint した人）のウォレットアドレス**です。

これは、**ユーザー認証**のようなものです。
- スマートコントラクトに含まれる関数を呼び出すには、ユーザーは有効なウォレットを接続する必要があります。
- `msg.sender` では、誰が関数を呼び出したかを正確に把握し、ユーザー認証を行っています。

🖋 Solidityの関数修飾子について
------------------

Solidity には、関数（function）に対してのみ使用される修飾子（＝関数修飾子）が存在します。

Solidity 開発では関数修飾子を意識しておかないとデータを記録する際のコスト（=ガス代）が跳ね上がってしまうので注意が必要です。

ここでポイントとなるのは、**ブロックチェーンに値を書き込むにはガス代を払う必要があること、そしてブロックチェーンから値を参照するだけなら、ガス代を払う必要がないことです。**

ここでは、主要な2つの関数修飾子を紹介します。

1. **`view`**: ` view` 関数は、読み取り専用の関数であり、呼び出した後に関数の中で定義された状態変数が変更されないようにします。

2. **`pure`**: `pure` 関数は、関数の中で定義された状態変数を読み込んだり変更したりせず、関数に渡されたパラメータや関数に存在するローカル変数のみを使用して値を返します。

以下に、Solidityの関数修飾子 `pure` と `view` についてまとめています。

|  | <p align = center>関数の中で定義された状態変数をブロックチェーン上で参照する（read）</p> | <p align = center>関数の中で定義された状態変数をブロックチェーン上に書き込む（write）|
| ----------- | ----------- |----------- |
| <p align = center> 関数修飾子がついていない関数<br>（デフォルト）</p>|<p align = center>✅</p>|<p align = center>✅</p>|
|  <p align = center> `view`関数</p>|<p align = center>✅</p>|<p align = center>❌</p>|
| <p align = center> `pure`関数</p>|<p align = center>❌</p>|<p align = center>❌</p>|


ここまでで理解して欲しいのは、`pure` や `view` 関数を使用すれば、**ガス代を削減できる**ということです。同時に、ブロックチェーン上にデータを書き込まないことで、**処理速度も向上します**。

🙋‍♂️ 質問する
-------------------------------------------
ここまでの作業で何かわからないことがある場合は、Discord の `#section-2-help` で質問をしてください。

ヘルプをするときのフローが円滑になるので、エラーレポートには下記の3点を記載してください✨
```
1. 何をしようとしていたか
2. エラー文をコピー&ペースト
3. エラー画面のスクリーンショット
```
-------------------------------------------
Solidity の構文について理解を深めたら、次のレッスンに進みましょう🎉
